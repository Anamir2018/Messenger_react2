(this.webpackJsonpmessenger=this.webpackJsonpmessenger||[]).push([[0],{23:function(e,t,s){},35:function(e,t,s){"use strict";s.r(t);var r=s(2),n=s.n(r),a=s(11),i=s.n(a),c=(s(23),s(5)),o="#0085ff",l="#aaaaaa",d="#444444",u=s(0),j=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:o,children:Object(u.jsx)("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})})},f=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-6",viewBox:"0 0 20 20",fill:o,preserveAspectRatio:"none",children:Object(u.jsx)("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})})},b=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:o,children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})},m=function(e){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.85 w-3.85",fill:"none",viewBox:"0 0 24 24",stroke:e.color||o,children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})},h=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"white",children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})},x=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"white",children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})},p=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:d,children:Object(u.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})},g=function(e){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"inline-block "+e.w+(e.h?" ".concat(e.h):" h-16.28 "),viewBox:"0 0 20 20",fill:l,children:Object(u.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd"})})},O=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:d,children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})})},v=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"#ffffff",children:Object(u.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})},w=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5.46 w-5.37",fill:"none",viewBox:"0 0 24 24",stroke:l,children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})},y=function(){return Object(u.jsx)("img",{className:"w-5.83",src:"/images/like.png",alt:"like"})},N=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},M=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:l,children:Object(u.jsx)("path",{fillRule:"evenodd",d:"M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})},k=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform -rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:l,children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})},_=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"white",children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})},F=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:o,children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})};var C=function(){return Object(u.jsxs)("header",{className:"flex sm:content-between flex-col sm:flex-row sm:h-16.18 px-2 lg:px-5.3 py-2 sm:py-0 items-center overflow-hidden",children:[Object(u.jsx)("img",{className:"px-0 sm:px-1 lg:px-3.46 w-10 min-w-10 sm:w-12 mb-4 sm:mb-0",src:"/images/icon_messenger.png",alt:"logo messenger"}),Object(u.jsx)("h1",{className:"pl-0 sm:pl-2 lg:pl-3.48 flex-1 text-base md:text-xl hidden sm:block",children:"Messenger"}),Object(u.jsx)("button",{children:Object(u.jsx)(b,{})})]})},S=s(1),I=s.n(S),T=s(6),L=s(3),R=s(4),z=s(7),P={list:[],selectedFriendId:void 0,colorChat:"#0084ff",sharedPhotos:[],searchFriend:"",isFriendWriting:!1},E=Object(z.b)({name:"friends",initialState:P,reducers:{setSelectedFriend:function(e,t){if(e.list.length>0){console.log(e.selectedFriendId);var s=e.list.filter((function(e){return e.id===t.payload}))[0].colorChat;return Object(R.a)(Object(R.a)({},e),{},{selectedFriendId:t.payload,colorChat:s||e.colorChat})}},setColorChat:function(e,t){return Object(R.a)(Object(R.a)({},e),{},{list:e.list.map((function(s){return s.id===e.selectedFriendId?Object(R.a)(Object(R.a)({},s),{},{colorChat:t.payload}):s})),colorChat:t.payload?t.payload:"#0084ff"})},setListFriends:function(e,t){return Object(R.a)(Object(R.a)({},e),{},{list:t.payload})},setSharedPhotos:function(e,t){return Object(R.a)(Object(R.a)({},e),{},{sharedPhotos:t.payload})},setSearchFriend:function(e,t){return Object(R.a)(Object(R.a)({},e),{},{searchFriend:t.payload})},setIsFriendWriting:function(e,t){return Object(R.a)(Object(R.a)({},e),{},{isFriendWriting:t.payload})},setIsFriendWritingTimeout:function(e,t){return Object(R.a)(Object(R.a)({},e),{},{isFriendWritingTimeout:t.payload})}}}),B=E,W=E.actions,D=W.setSelectedFriend,H=W.setColorChat,U=W.setListFriends,V=W.setSharedPhotos,A=W.setSearchFriend,J=W.setIsFriendWriting,Y=W.setIsFriendWritingTimeout,q=s(18),Q=Object(q.a)("https://snrgrmekzfwtjqmlmaha.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzNzI3Mzg4MiwiZXhwIjoxOTUyODQ5ODgyfQ.jDdHaSs9Yr-LZ-B90xMsLH6C3rKQF7mYUbYXRHj7KOg");var X=function(){return Object(u.jsx)("div",{className:"absolute z-50 w-full h-full bg-gray-200 bg-opacity-60",children:Object(u.jsx)("div",{className:"absolute z-50 top-1/2 left-1/2",children:Object(u.jsx)("svg",{className:"animate-spin h-5 w-5 mr-3",viewBox:"0 0 24 24"})})})};var K=function(){var e=Object(L.c)((function(e){return e.friends})),t=Object(L.c)((function(e){return e.user.user})),s=Object(L.b)(),n=Object(r.useState)(!1),a=Object(c.a)(n,2),i=a[0],o=a[1],l=Object(r.useState)(""),d=Object(c.a)(l,2),j=d[0],f=d[1];return Object(r.useEffect)((function(){function e(){return(e=Object(T.a)(I.a.mark((function e(){var r,n,a,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,Q.from("users");case 3:r=e.sent,n=r.data,(a=r.error)?f(a.message):n&&(i=n.filter((function(e){return e.id!==(null===t||void 0===t?void 0:t.id)})),s(U(i)),s(D(i[0].id))),o(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(u.jsxs)("ul",{className:" h-44 relative  overflow-y-auto flex-1",children:[""!==j&&Object(u.jsx)("span",{className:"text-red-600",children:"Error fetching data !"}),i?Object(u.jsx)(X,{}):e.list.map((function(t,s){return Object(u.jsx)(Z,{id:t.id,firstName:t.firstName,lastName:t.lastName,avatar:t.avatar,lastMessage:t.lastMessage,timeLastMessage:"11:30",isSelected:e.selectedFriendId?t.id===e.selectedFriendId:0===s},t.id)}))]})};function Z(e){var t=e.id,s=e.firstName,n=e.lastName,a=e.avatar,i=e.lastMessage,o=e.timeLastMessage,l=e.isSelected,d=Object(r.useState)(0),j=Object(c.a)(d,2),f=j[0],b=j[1],m=Object(L.c)((function(e){return e.friends.selectedFriendId}));Object(r.useEffect)((function(){(function(){var t=Object(T.a)(I.a.mark((function t(){var s,r,n,a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q.from("messages").select("*").eq("id_reciever",e.id);case 2:s=t.sent,r=s.data,(n=s.error)?console.log(n):r&&(null===r||void 0===r?void 0:r.length)>0&&(a=0,null===r||void 0===r||r.map((function(e){return!e.is_read&&a++})),b(a));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[m]);var h=Object(L.c)((function(e){return e.friends.searchFriend})),x=""===h||(s.trim().toLocaleLowerCase()+" "+n.trim().toLocaleLowerCase()).includes(h.trim().toLocaleLowerCase()),p=Object(L.b)();return x?Object(u.jsxs)("li",{className:(l?" bg-gray_e ":"")+" cursor-pointer w-full flex items-center px-2 lg:px-5.3 py-3.48 lg:py-3.84 overflow-hidden",onClick:function(){console.log(e),p(D(t))},children:[Object(u.jsx)("div",{className:" rounded-full ring-2 ring-gray-100 overflow-hidden w-10 sm:w-12 min-w-10 flex ",children:Object(u.jsx)("span",{className:" relative inline-block w-full pt-full  rounded-full text-white",children:a?Object(u.jsx)("img",{className:"absolute top-0 left-0 w-full h-full",src:a,alt:"avatar"}):Object(u.jsx)("span",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center bg-main_color_blue",children:s[0]+n[0]})})}),Object(u.jsxs)("div",{className:"flex pl-2 lg:pl-5.3 flex-1 overflow-hidden",children:[Object(u.jsxs)("div",{className:" w-1/4 flex-grow",children:[Object(u.jsx)("h3",{className:" w-full text-base text-gray_4   overflow-hidden whitespace-nowrap overflow-ellipsis",children:s+" "+n}),Object(u.jsx)("p",{className:" w-full text-sm2 text-gray_a  whitespace-nowrap overflow-ellipsis overflow-hidden ",children:i||""})]}),f>0&&Object(u.jsx)("div",{className:" self-center p-1",children:Object(u.jsx)("span",{className:" inline-block bg-main_color_blue text-white  text-sm rounded-full px-2.6 py-1 self-start",children:f})}),Object(u.jsx)("div",{className:"w-auto text-gray_a",children:o})]})]}):Object(u.jsx)(u.Fragment,{})}var G=s(13),$=Object(z.b)({name:"chat",initialState:{messages:[],action:null,searchConversation:""},reducers:{addNewMessage:function(e,t){return Object(R.a)(Object(R.a)({},e),{},{messages:[].concat(Object(G.a)(e.messages),[t.payload]),action:"newMessage"})},setAction:function(e,t){return Object(R.a)(Object(R.a)({},e),{},{action:t.payload})},updateReactionMessage:function(e,t){t.payload.idSelectedMessage&&e.messages.forEach((function(e){e.id===t.payload.idSelectedMessage&&("text"===t.payload.reactionType?e.reactionText=t.payload.reaction:e.reactionSharedImage=t.payload.reaction)}))},setChatMessages:function(e,t){return Object(R.a)(Object(R.a)({},e),{},{messages:t.payload})},setSearchConversation:function(e,t){return Object(R.a)(Object(R.a)({},e),{},{searchConversation:t.payload})},updateMessageToBeRead:function(e,t){e.messages.map((function(e){return e.id===t.payload&&(e.isRead=!0),e}))},deleteMessage:function(e,t){return Object(R.a)(Object(R.a)({},e),{},{messages:e.messages.filter((function(e){return e.id!==t.payload}))})}}}),ee=$,te=$.actions,se=te.addNewMessage,re=te.setAction,ne=te.updateReactionMessage,ae=te.setChatMessages,ie=te.setSearchConversation,ce=te.updateMessageToBeRead,oe=te.deleteMessage;var le=function(e){var t=Object(L.b)();return Object(u.jsxs)("div",{className:"flex items-center sm:justify-start  overflow-hidden "+(e.leftPadding||""),children:[Object(u.jsx)("label",{htmlFor:e.idInput,children:Object(u.jsx)(m,{color:e.colorIcon})}),Object(u.jsx)("input",{className:" w-16 flex-1 pl-2 lg:pl-4 text-gray_a text-base focus:outline-none border-gray-100 border-b-2 border-opacity-0 focus:border-opacity-100 focus:transition-opacity ease-in-out duration-300 ",id:e.idInput,type:"text",placeholder:"Search "+("searchConversation"===e.idInput?"conversation":"friend"),onChange:function(s){"searchFriend"===e.idInput?t(A(s.currentTarget.value)):"searchConversation"===e.idInput&&t(ie(s.currentTarget.value))}})]})};var de=function(){return Object(u.jsxs)("div",{className:"h-full flex flex-col w-full overflow-hidden",children:[Object(u.jsx)(C,{}),Object(u.jsxs)("div",{className:" px-2 lg:px-5.3 py-1",children:[Object(u.jsx)(ue,{}),Object(u.jsx)("div",{className:"hidden sm:block ",children:Object(u.jsx)(le,{colorIcon:l,leftPadding:"pl-2 lg:pl-3.85",idInput:"searchFriend"})})]}),Object(u.jsx)(K,{})]})};function ue(){return Object(u.jsx)("div",{className:"flex justify-center py-2",children:Object(u.jsx)("button",{className:"inline-block sm:hidden transform scale-150",onClick:function(){},children:Object(u.jsx)(m,{color:l})})})}var je=function(){var e,t,s=Object(L.c)((function(e){if(e.friends.list.length>0)return e.friends.selectedFriendId?e.friends.list.filter((function(t){return t.id===e.friends.selectedFriendId}))[0]:e.friends.list[0]}));if(!s)return Object(u.jsx)(X,{});var r=s.firstName+" "+s.lastName,n=s.status?(null===(e=s.status)||void 0===e?void 0:e.trim()[0].toUpperCase())+(null===(t=s.status)||void 0===t?void 0:t.trim().slice(1)):"";return Object(u.jsxs)("header",{className:" relative h-16.18 min-h-16.18 pt-3.9 overflow-hidden shadow-sm",children:[Object(u.jsxs)("div",{className:"absolute right-2 sm:right-5.62 top-5.46",children:[Object(u.jsx)("button",{children:Object(u.jsx)(j,{})}),Object(u.jsx)("button",{className:" ml-2 sm:ml-8.26",children:Object(u.jsx)(f,{})})]}),Object(u.jsx)("h2",{className:" pl-4 sm:p-0 sm:text-center text-1.14 text-gray_4",children:r}),Object(u.jsxs)("p",{className:" pl-4 sm:p-0 sm:text-center text-gray_a",children:[" ",n," "]})]})},fe=["https://static.xx.fbcdn.net/images/emoji.php/v9/z92/1/128/2764.png","https://static.xx.fbcdn.net/images/emoji.php/v9/z6e/1/128/1f606.png","https://static.xx.fbcdn.net/images/emoji.php/v9/z5b/1/128/1f62e.png","https://static.xx.fbcdn.net/images/emoji.php/v9/za8/1/128/1f622.png","https://static.xx.fbcdn.net/images/emoji.php/v9/za6/1/128/1f620.png","https://static.xx.fbcdn.net/images/emoji.php/v9/z96/1/128/1f44d.png","https://static.xx.fbcdn.net/images/emoji.php/v9/z17/1/128/1f44e.png"];var be=function(e){return Object(u.jsx)("div",{children:e.value>=0&&Object(u.jsx)("img",{className:"w-5 mx-3.3",src:fe[e.value],alt:"reaction"})})},me=Object(z.b)({name:"reactionPoup",initialState:{show:!1,messageType:"",popupType:"",idSelectedMessage:-1},reducers:{showPopup:function(e,t){var s=e.idSelectedMessage!==t.payload.idSelectedMessage||e.messageType!==t.payload.messageType||e.popupType!==t.payload.popupType;return{show:s,messageType:t.payload.messageType,idSelectedMessage:s?t.payload.idSelectedMessage:-1,popupType:t.payload.popupType}}}}),he=me,xe=me.actions.showPopup;var pe=function(e){var t=function(){var e=Object(T.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.from("messages").delete().eq("id",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=Object(L.b)(),r=Object(L.c)((function(e){return e.reactionPopup.idSelectedMessage}));return"reaction"===e.type?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:" absolute  bottom-11 left-1/2 bg-white transform -translate-x-1/2 px-2 sm:px-4 py-2 flex items-center rounded-full z-10",children:fe.map((function(e,t){return Object(u.jsx)(ge,{id:t,url:e},t)}))}),Object(u.jsx)("span",{className:"absolute bottom-12 left-1/2 h-6 w-6 bg-white -rotate-45 transform -translate-x-3 translate-y-3 z-0"})]}):"options"===e.type?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:" absolute  bottom-11 left-1/2 bg-white text-gray-500 transform -translate-x-1/2 p-0.5 sm:p-1 flex items-center rounded-full z-10 text-xs sm:text-base",children:[Object(u.jsx)("button",{className:"px-1 sm:px-3 py-1 hover:bg-gray-200 rounded-xl",onClick:function(){r&&(s(oe(r)),t(r))},children:"Delete"}),Object(u.jsx)("button",{className:"px-1 sm:px-3 py-1 hover:bg-gray-200 rounded-xl",children:"Transfer"})]}),Object(u.jsx)("span",{className:"absolute bottom-12 left-1/2 h-6 w-6 bg-white -rotate-45 transform -translate-x-3 translate-y-3 z-0"})]}):Object(u.jsx)(u.Fragment,{})};function ge(e){var t=function(){var e=Object(T.a)(I.a.mark((function e(t,s,r){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="text"===r?{reaction_text:s}:{reaction_shared_image:s},e.next=3,Q.from("messages").update(n).eq("id",t);case 3:case"end":return e.stop()}}),e)})));return function(t,s,r){return e.apply(this,arguments)}}(),s=Object(L.b)(),r=Object(L.c)((function(e){return e.reactionPopup.messageType})),n=Object(L.c)((function(e){return e.reactionPopup.idSelectedMessage}));return Object(u.jsx)("button",{className:"w-4 sm:w-7 sm:mx-1 mx-0.5",children:Object(u.jsx)("img",{className:"w-full",src:e.url,alt:"reaction",onClick:function(){n&&(s(re("reactToMessage")),s(ne({idSelectedMessage:n,reaction:e.id,reactionType:r})),t(n,e.id,r))}})})}var Oe="react",ve="reply",we="options";var ye=function(e){e.idMessage;var t=Object(L.b)(),s=Object(L.c)((function(t){return{show:t.reactionPopup.show&&t.reactionPopup.idSelectedMessage===e.idMessage,messageType:t.reactionPopup.messageType,popupType:t.reactionPopup.popupType}})),r=function(s){switch(s){case Oe:t(xe({idSelectedMessage:e.idMessage,messageType:e.type,popupType:"react"}));break;case ve:t(xe({idSelectedMessage:-1}));break;case we:t(xe({idSelectedMessage:e.idMessage,messageType:e.type,popupType:"options"}))}};return Object(u.jsxs)("div",{className:" flex mx-4 ".concat(e.isFriendContent?"":"flex-row-reverse"," ").concat("image"===e.type?"flex-col sm:flex-row":""),children:[e.isFriendContent&&Object(u.jsx)("div",{className:"relative",children:Object(u.jsxs)("div",{className:" cursor-pointer text-gray_a rounded-full overflow-hidden p-1 hover:bg-gray-300",onClick:function(){return r(Oe)},children:[s.show&&s.messageType===e.type&&"react"===s.popupType&&Object(u.jsx)(pe,{type:"reaction"}),Object(u.jsx)(N,{})]})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{className:" text-gray_a rounded-full overflow-hidden p-1 hover:bg-gray-300 "+(e.isFriendContent?"":" transform scale-x-n100 "),onClick:function(){return r(ve)},children:"text"===e.type?Object(u.jsx)(M,{}):"image"===e.type?Object(u.jsx)(k,{}):""})}),Object(u.jsx)("div",{className:"relative",children:Object(u.jsxs)("div",{className:" cursor-pointer text-gray_a rounded-full overflow-hidden p-1 hover:bg-gray-300",onClick:function(){return r(we)},children:[s.show&&s.messageType===e.type&&"options"===s.popupType&&Object(u.jsx)(pe,{type:"options"}),Object(u.jsx)(O,{})]})})]})},Ne=Object(z.b)({name:"imageViewer",initialState:{urlImage:""},reducers:{showImageViewer:function(e,t){return Object(R.a)(Object(R.a)({},e),{},{urlImage:t.payload})}}}),Me=Ne,ke=Ne.actions.showImageViewer;function _e(e){Object(r.useEffect)((function(){e.lastUserMessageReadRef&&e.lastUserMessageReadRef.current&&e.lastUserMessageReadRef.current.scrollIntoView({behavior:"smooth",block:"start"})}),[]);var t=Object(r.useState)(!1),s=(Object(L.c)((function(e){return e.user})),Object(L.c)((function(e){return e.friends.list.filter((function(t){return t.id===e.friends.selectedFriendId}))[0]})));return Object(u.jsxs)("div",{className:"w-full flex flex-col overflow-hidden",ref:e.lastUserMessageReadRef,children:[e.showTime&&Object(u.jsx)(Te,{time:e.data.time}),Object(u.jsxs)("div",{className:"flex  "+(e.data.isFriendMessage?"":" flex-row-reverse "),children:[Object(u.jsx)(Ie,{src:s.avatar,isLastRead:e.isLastRead,isFriend:e.data.isFriendMessage}),Object(u.jsx)("div",{className:"flex-auto",children:""===e.data.text&&""===e.data.sharedImage?Object(u.jsx)(Ce,{idMessage:e.data.id,src:"/images/like.png",isFriendMessage:e.data.isFriendMessage,showPopupState:t,isLikeMessage:!0}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Se,{idMessage:e.data.id,content:e.data.text,isFriendMessage:e.data.isFriendMessage,borderRadius:e.borderRadius,reaction:e.data.reactionText,showPopupState:t}),Object(u.jsx)(Ce,{idMessage:e.data.id,src:e.data.sharedImage,isFriendMessage:e.data.isFriendMessage,showPopupState:t,reaction:e.data.reactionSharedImage})]})})]})]})}var Fe=n.a.memo(_e);function Ce(e){var t=Object(L.b)(),s=Object(L.c)((function(t){return t.reactionPopup.show&&t.reactionPopup.idSelectedMessage===e.idMessage&&"image"===t.reactionPopup.messageType}));return Object(u.jsx)(u.Fragment,{children:e.src&&Object(u.jsxs)("div",{className:" group flex items-center"+(e.isFriendMessage?"":"  flex-row-reverse "),children:[e.isLikeMessage?Object(u.jsx)("img",{className:" w-10 inline-block  ".concat(e.isFriendMessage?"":"transform scale-x-n100"),src:e.src,alt:"like"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{className:" cursor-pointer inline-block max-w-70 sm:max-w-37.84 "+(e.isFriendMessage?" rounded-tr-xl rounded-br-xl sm:rounded-tr-3xl sm:rounded-br-3xl ":" rounded-tl-xl rounded-bl-xl sm:rounded-tl-3xl sm:rounded-bl-3xl "),src:e.src,alt:"shared",onClick:function(){t(ke(e.src||""))}}),void 0!==e.reaction&&Object(u.jsx)("span",{className:"inline-block self-end text-gray_a ",children:Object(u.jsx)(be,{value:e.reaction})})]}),Object(u.jsx)("div",{className:" opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-in-out ".concat(s?"opacity-100":""," "),children:Object(u.jsx)(ye,{idMessage:e.idMessage,setShowPopup:e.showPopupState[1],isFriendContent:e.isFriendMessage,type:e.isLikeMessage?"like":"image"})})]})})}function Se(e){var t=Object(L.c)((function(e){return e.friends.colorChat})),s=Object(L.c)((function(t){return t.reactionPopup.show&&t.reactionPopup.idSelectedMessage===e.idMessage&&"text"===t.reactionPopup.messageType})),n=Object(L.c)((function(e){return e.chat.searchConversation}));Object(r.useEffect)((function(){console.log("searchMessage",n)}),[n]);var a=function(){if(""!==n.trim()){var t=e.content;if(t.toLowerCase().includes(n.trim().toLowerCase())){var s=t.toLowerCase().indexOf(n.trim().toLowerCase());if(s>-1){var r="";0!==s&&(r=t.slice(0,s));var a=t.slice(s,s+n.length),i=t.slice(s+n.length);return Object(u.jsxs)(u.Fragment,{children:[r,Object(u.jsx)("span",{className:" text-red-600 bg-yellow-300 inline-block",children:a}),i]})}}}return Object(u.jsx)(u.Fragment,{children:e.content})};return Object(u.jsx)(u.Fragment,{children:e.content&&Object(u.jsxs)("div",{className:" group mb-3.2 flex items-center "+(e.isFriendMessage?" text-white ":" text-gray_4 text-right flex-row-reverse "),children:[Object(u.jsx)("p",{className:e.borderRadius+" inline-block px-2 py-2 sm:px-5.11 sm:py-3 ",style:{backgroundColor:e.isFriendMessage?t:"white"},children:Object(u.jsx)(a,{})}),void 0!==e.reaction&&Object(u.jsx)("span",{className:"inline-block self-end text-gray_a ",children:Object(u.jsx)(be,{value:e.reaction})}),Object(u.jsx)("div",{className:" opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-in-out ".concat(s?"opacity-100":""," "),children:Object(u.jsx)(ye,{idMessage:e.idMessage,setShowPopup:e.showPopupState[1],isFriendContent:e.isFriendMessage,type:"text"})})]})})}function Ie(e){var t=e.src,s=e.isFriend,r=e.isLastRead;return console.log(!e.isFriend&&e.isLastRead),Object(u.jsx)("div",{className:"self-end "+(e.isFriend?" px-1 sm:px-3.92 ":" w-6 sm:w-8.33 pl-3.3 "),children:t?s||r?Object(u.jsx)("img",{className:"rounded-full  w-4 "+(s?" sm:w-8.29 ":""),src:t,alt:"avatar"}):"":s||r?Object(u.jsx)(g,{w:s?"w-6 sm:w-8.29":"w-4",h:s?"w-6 sm:h-8.29":"h-4"}):""})}function Te(e){return Object(u.jsxs)("p",{className:"text-center text-gray_a py-5.37",children:[" ",Le(e.time)," "]})}function Le(e){if(Date.now()-e<6e4)return"now";var t=new Date(e);return(t.getDate()>9?t.getDate():"0"+t.getDate())+"-"+(t.getMonth()+1>9?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+t.getFullYear()+" "+(t.getHours()>9?t.getHours():"0"+t.getHours())+":"+(t.getMinutes()>9?t.getMinutes():"0"+t.getMinutes())}var Re=function(){var e=Object(L.c)((function(e){return e.friends.colorChat})),t=Object(r.useState)(!1),s=Object(c.a)(t,2),n=s[0],a=s[1],i=Object(L.c)((function(e){var t;return null===(t=e.user.user)||void 0===t?void 0:t.id})),o=Object(L.c)((function(e){return e.friends.selectedFriendId}));return Object(r.useEffect)((function(){var e=Q.from("friends").on("UPDATE",(function(e){var t;((t=e.new).id_user1===i&&t.id_user2===o||t.id_user2===i&&t.id_user1===o)&&(o===t.id_user1?a(t.user1_is_writing):a(t.user2_is_writing))})).subscribe();return function(){Q.removeSubscription(e)}}),[o]),Object(u.jsx)("div",{className:" opacity-0 transform transition-all duration-700 ease-out z-20 absolute bottom-0 left-8 sm:left-16.18  ".concat(n?" opacity-100  transition-all duration-500 ease-in-out -translate-y-20.19":""),children:Object(u.jsxs)("div",{className:"w-12.87 h-8.29 rounded-full flex items-center justify-between px-5.11 py-2",style:{backgroundColor:e},children:[Object(u.jsx)("span",{className:" animate-bounce1  self-end  inline-block w-1.5 h-1.5 rounded-full bg-white"}),Object(u.jsx)("span",{className:"animate-bounce2 self-end inline-block w-1.5 h-1.5 rounded-full bg-white"}),Object(u.jsx)("span",{className:"animate-bounce1 self-end  inline-block w-1.5 h-1.5 rounded-full bg-white"})]})})};var ze=function(e){var t=Object(L.b)(),s=Object(L.c)((function(e){return e.chat.messages})),n=Object(L.c)((function(e){return e.user.user})),a=Object(L.c)((function(e){return e.friends.selectedFriendId})),i=Object(L.c)((function(e){return e.chat.action})),o=Object(r.useState)(!1),l=Object(c.a)(o,2),d=l[0],j=l[1],f=Object(r.useState)(""),b=Object(c.a)(f,2),m=b[0],h=b[1],x=Object(r.useRef)(null),p=Object(r.useRef)(null);Object(r.useEffect)((function(){s.length>0&&!s[s.length-1].isFriendMessage&&"newMessage"===i&&null!==x.current&&x.current.scrollIntoView({behavior:"smooth",block:"end"})}),[s]);var g=function(){var e=Object(T.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,Q.from("messages").update({is_read:!0}).eq("id",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(T.a)(I.a.mark((function e(s){var r,i,c,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!s&&j(!0),e.next=3,Q.from("messages").select("*").order("time",{ascending:!0});case 3:r=e.sent,i=r.data,(c=r.error)?h(c.message):i&&(o=(o=i.filter((function(e){return e.id_sender===(null===n||void 0===n?void 0:n.id)&&e.id_reciever===a||e.id_sender===a&&e.id_reciever===(null===n||void 0===n?void 0:n.id)}))).map((function(e){return{id:e.id,isFriendMessage:e.id_sender===a,isRead:e.is_read,time:e.time,text:e.text,reactionText:e.reaction_text,sharedImage:e.shared_image,reactionSharedImage:e.reaction_shared_image}})),t(ae(o))),!s&&j(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){function e(){return(e=Object(T.a)(I.a.mark((function e(){var s,r,i,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.from("friends").select("*");case 2:s=e.sent,(r=s.data)&&(i=r.filter((function(e){return e.id_user1===(null===n||void 0===n?void 0:n.id)&&e.id_user2===a||e.id_user2===(null===n||void 0===n?void 0:n.id)&&e.id_user1===a}))).length>0&&(c=i[0].id_user1===(null===n||void 0===n?void 0:n.id)?i[0].color_chat:i[0].color_chat2,t(H(c)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}O(),function(){e.apply(this,arguments)}()}),[a]),Object(r.useEffect)((function(){var e=Q.from("messages").on("*",(function(e){if(e&&"INSERT"===e.eventType)O(!0);else if(e&&"UPDATE"===e.eventType){var r=s.filter((function(t){return t.id===e.new.id}));0!==r.length&&r[0].id&&!r[0].isRead&&t(ce(r[0].id))}})).subscribe();return function(){Q.removeSubscription(e)}}),[]);var v=-1,w=-1;s.forEach((function(e,t){e.isRead&&(e.isFriendMessage?w=t:v=t)}));var y="relative overflow-hidden h-full flex flex-col  transition-width duration-500 ease-in-out";return e.isRightClosedState[0]?y+=" center-width-calc ":e.isMobileScreenState[0]?y+=" w-0":y+=" w-1/2  ",Object(u.jsxs)("div",{className:y,children:[Object(u.jsx)(je,{}),Object(u.jsx)(Re,{}),Object(u.jsxs)("div",{className:" h-3/6 flex-1 flex flex-col ",children:[m&&Object(u.jsx)("p",{className:"text-red-600",children:"Error fetching data !"}),Object(u.jsx)("div",{ref:x,className:" relative flex-1 overflow-auto bg-gray_e w-full ",children:d?Object(u.jsx)(X,{}):Object(u.jsx)(u.Fragment,{children:s.map((function(e,t){var r=t>0?s[t-1]:void 0,n=function(e,t,s){var r="";e.isFriendMessage?(r+=" rounded-tr-3xl ",r+=t&&t.isFriendMessage===e.isFriendMessage&&e.time-t.time<6e4?"":" rounded-tl-3xl ",r+=s&&s.isFriendMessage===e.isFriendMessage&&s.time-e.time<6e4?"":" rounded-br-3xl "):(r+=" rounded-tl-3xl ",r+=t&&t.isFriendMessage===e.isFriendMessage&&e.time-t.time<6e4?"":" rounded-tr-3xl ",r+=s&&s.isFriendMessage===e.isFriendMessage&&s.time-e.time<6e4?"":" rounded-bl-3xl ");return r}(e,r,t<s.length-1?s[t+1]:void 0),a=function(e,t){return void 0===t||new Date(e.time).getTime()-new Date(t.time).getTime()>6e4}(e,r);return e.id&&e.isFriendMessage&&!e.isRead&&g(e.id),Object(u.jsx)(Fe,{data:e,showTime:a,isLastRead:v===t,borderRadius:n,lastUserMessageReadRef:w===t?p:void 0},t)}))})}),Object(u.jsx)("div",{className:"h-12.97 w-full relative z-30 bg-white",children:Object(u.jsx)(Pe,{})})]})]})};function Pe(){var e=Object(L.b)(),t=Object(L.c)((function(e){return e.friends.isFriendWriting})),s=Object(L.c)((function(e){var t;return null===(t=e.user.user)||void 0===t?void 0:t.id})),n=Object(L.c)((function(e){return e.friends.selectedFriendId})),a=Object(L.c)((function(e){return e.friends.isFriendWritingTimeout})),i=function(){var e=Object(T.a)(I.a.mark((function e(t){var r,a,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.from("friends").select("*");case 2:if(!(r=e.sent).error){e.next=7;break}console.log(r.error),e.next=12;break;case 7:if(!r.data){e.next=12;break}return r.data.filter((function(e){return e.id_user1===s&&e.id_user2===n||e.id_user2===s&&e.id_user1===n}))[0].id_user1===s?(a={user1_is_writing:t},i={id_user1:s,id_user2:n}):(a={user2_is_writing:t},i={id_user2:s,id_user1:n}),e.next=12,Q.from("friends").update(a).match(i);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){"number"===typeof a&&clearTimeout(a);var t=setTimeout((function(){e(J(!1)),i(!1)}),2e3);e(Y(t))},l=Object(L.c)((function(e){return e.chat.messages.length>0?e.chat.messages[e.chat.messages.length-1].id:0})),d=Object(r.useState)(""),j=Object(c.a)(d,2),f=j[0],b=j[1],m=function(){var e=Object(T.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.from("messages").insert([{id_reciever:n,id_sender:s,text:t.text,reaction_text:t.reactionText,reaction_shared_image:t.reactionSharedImage,is_read:!1}]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(t,s){var r={id:l,isFriendMessage:!1,isRead:!1,text:"",time:Date.now(),reactionText:-1,sharedImage:"",reactionSharedImage:-1};void 0!==t&&(r.text=t),void 0!==s&&(r.sharedImage=s),e(re("newMessage")),e(se(r)),void 0!==t&&void 0!==s&&b(""),m(r)};return Object(u.jsxs)("form",{className:" flex border-t border-opacity-40 h-full items-center",onSubmit:function(e){e.preventDefault(),""!==f.trim()&&h(f.trim(),"")},children:[Object(u.jsx)("input",{placeholder:"Type a message...",className:" pl-5 w-9/12 sm:flex-1 text-gray_4 outline-none placeholder-gray_a",type:"text",onChange:function(s){b(s.target.value),t||(e(J(!0)),i(!0)),o()},value:f}),Object(u.jsxs)("div",{className:"relative cursor-pointer",children:[Object(u.jsx)("input",{className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer",type:"file",name:"attach_file",id:"attach_file"}),Object(u.jsx)(w,{})]}),Object(u.jsx)("button",{type:"button",className:" mx-3 sm:mr-5.18 sm:ml-5.57",onClick:function(){h()},children:Object(u.jsx)(y,{})})]})}var Ee=function(e){var t=Object(L.c)((function(e){return e.user.user})),s="";return s=e.isRightClosedState[0]?" w-0 overflow-hidden  ":" md:w-auto h-16.18 p-0 md:px-2 lg:px-5.3 flex items-center justify-end ",null!==t?Object(u.jsxs)("header",{className:s,children:[Object(u.jsx)("h2",{className:" transition-width  text-sm lg:text-base text-right text-gray_4 overflow-hidden overflow-ellipsis whitespace-nowrap flex-1",children:"".concat(t.firstName," ").concat(t.lastName)}),Object(u.jsx)("div",{className:"w-9 min-w-9 rounded-full overflow-hidden ml-2 lg:ml-3.97",children:""===t.avatar?Object(u.jsx)(g,{w:"w-full",h:"auto"}):Object(u.jsx)("img",{className:"w-full",src:t.avatar,alt:"avatar"})})]}):Object(u.jsx)(X,{})};var Be=function(){var e=Object(L.c)((function(e){if(e.friends.list.length>0)return e.friends.selectedFriendId?e.friends.list.filter((function(t){return t.id===e.friends.selectedFriendId}))[0]:e.friends.list[0]}));return void 0===e?Object(u.jsx)(X,{}):Object(u.jsxs)("div",{className:" text-center",children:[e.avatar?Object(u.jsx)("div",{className:"w-16.28 h-16.28 mx-auto rounded-full flex items-center justify-center overflow-hidden ring-gray_e ring-2 ",children:Object(u.jsx)("img",{className:"w-full inline-block",src:e.avatar,alt:"avatar"})}):Object(u.jsx)(g,{}),Object(u.jsxs)("h4",{className:"text-gray_4 mt-5.11",children:[" ","".concat(e.firstName," ").concat(e.lastName)," "]}),Object(u.jsxs)("p",{className:"text-gray_a text-sm2",children:[" ",e.adress," "]}),e.fbLink&&Object(u.jsx)("p",{className:"text-sm2 text-main_color_blue",children:Object(u.jsxs)("a",{href:"https://facebook.com"+e.fbLink,children:[Object(u.jsx)("span",{className:"text-white inline-block w-4 h-4 bg-facebook_color_blue font-extrabold rounded-sm pl-1 mr-3.44",children:"f"}),e.fbLink]})})]})};function We(){var e=Object(L.c)((function(e){return e.friends.colorChat})),t=Object(L.b)();return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"flex justify-between items-center my-8.89",children:[Object(u.jsx)("h3",{className:"text-gray_a text-sm2",children:"Conversation Color"}),Object(u.jsx)("button",{children:Object(u.jsx)(O,{})})]}),Object(u.jsx)("ul",{className:"grid grid-cols-7  md:grid-cols-4 xl:grid-cols-7 gap-3.97",children:Ue.map((function(s,r){return Object(u.jsx)(He,{id:r,code:s,colorChat:e,setColorChat:t},r)}))})]})}var De=n.a.memo(We);function He(e){var t=Object(L.c)((function(e){return e.user.user})),s=Object(L.c)((function(e){return e.friends.selectedFriendId})),r=function(){var e=Object(T.a)(I.a.mark((function e(r){var n,a,i,c,o,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!s){e.next=16;break}return e.next=3,Q.from("friends").select("*");case 3:if(!(n=e.sent).error){e.next=8;break}console.log(n.error),e.next=16;break;case 8:return n.data.filter((function(e){return e.id_user1===t.id&&e.id_user2===s||e.id_user2===t.id&&e.id_user1===s}))[0].id_user1===t.id?(a={color_chat:r},i={id_user1:t.id,id_user2:s}):(a={color_chat2:r},i={id_user2:t.id,id_user1:s}),e.next=12,Q.from("friends").update(a).match(i);case 12:c=e.sent,o=c.data,(l=c.error)?console.log(l):console.log(o);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=n.a.useCallback((function(){e.setColorChat(H(e.code)),r(e.code)}),[e]);return Object(u.jsx)("button",{className:"w-8 pt-8 sm:w-8.26 sm:pt-8.26 rounded-full relative ",style:{backgroundColor:e.code},onClick:a,children:(void 0===e.colorChat&&0===e.id||e.colorChat===e.code)&&Object(u.jsx)("div",{className:"absolute sm:top-1/4 sm:left-1/4 top-1.5 left-1.5 ",children:Object(u.jsx)(v,{})})})}var Ue=["#0084ff","#f44336","#9c27b0","#3f51b5","#51cbf9","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffc107","#ff5722","#795548","#607d8b"];var Ve=function(){var e=Object(L.b)(),t=Object(r.useState)(!1),s=Object(c.a)(t,2),n=s[0],a=s[1],i=Object(r.useState)(""),o=Object(c.a)(i,2),l=o[0],d=o[1],j=Object(L.c)((function(e){return e.friends.sharedPhotos})),f=Object(L.c)((function(e){return e.user.user})),b=Object(L.c)((function(e){return e.friends.selectedFriendId}));return Object(r.useEffect)((function(){(function(){var t=Object(T.a)(I.a.mark((function t(){var s,r,n,i;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!0),t.next=3,Q.from("sharedImages").select("*");case 3:s=t.sent,r=s.data,(n=s.error)?d(n.message):r&&(i=r.filter((function(e){return e.id_sender===b&&e.id_reciever===(null===f||void 0===f?void 0:f.id)||e.id_sender===(null===f||void 0===f?void 0:f.id)&&e.id_reciever===b})),e(V(i.map((function(e){return e.url}))))),a(!1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[b]),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"flex justify-between items-center my-8.89",children:[Object(u.jsx)("h3",{className:"text-gray_a text-sm2",children:"Shared Photos"}),Object(u.jsx)("button",{children:Object(u.jsx)(O,{})})]}),Object(u.jsxs)("div",{className:"relative",children:[n&&Object(u.jsx)(X,{}),l&&Object(u.jsx)("div",{className:"text-red-600",children:" Error fetching data !"}),j.length>0&&Object(u.jsx)("ul",{className:"grid grid-cols-3 md:grid-cols-2 lg:grid-cols-3  gap-3.36",children:j.map((function(e,t){return Object(u.jsx)(Ae,{url:e},t)}))})]})]})};function Ae(e){var t=Object(L.b)();return Object(u.jsx)("div",{className:"w-full pt-full rounded-full relative cursor-pointer ",onClick:function(){t(ke(e.url.trim()))},children:Object(u.jsx)("img",{className:" absolute top-0 left-0 h-full",src:e.url,alt:"shared"})})}var Je=function(e){var t="shadow-lg  relative transform transition-width duration-500 ease-in-out overflow-hidden h-full ";return e.isRightClosedState[0]?t+=" w-5.3 ":e.isMobileScreenState[0]?t+=" right-width-calc ":t+=" w-1/4 ",Object(u.jsxs)("div",{className:t,children:[Object(u.jsx)(Ee,{isRightClosedState:e.isRightClosedState}),Object(u.jsx)(Ye,{isRightClosedState:e.isRightClosedState}),Object(u.jsxs)("div",{className:" relative overflow-auto h-full  "+(!0===e.isRightClosedState[0]?" p-0 w-0 ":" px-5.3 w-full "),children:[Object(u.jsx)(qe,{}),Object(u.jsx)(Be,{}),Object(u.jsx)("div",{className:" mt-8.26",children:Object(u.jsx)(le,{colorIcon:o,idInput:"searchConversation"})}),Object(u.jsx)("div",{className:" my-8.26",children:Object(u.jsx)(De,{})}),Object(u.jsx)("div",{className:" my-8.26",children:Object(u.jsx)(Ve,{})})]})]})};function Ye(e){var t=Object(c.a)(e.isRightClosedState,2),s=t[0],r=t[1];return Object(u.jsx)("button",{className:"absolute z-10 cursor-pointer w-5.3 h-8.89 top-16.18 left-0 bg-main_color_blue",onClick:function(){console.log("click btn"),r(!s)},children:s?Object(u.jsx)(h,{}):Object(u.jsx)(x,{})})}function qe(){return Object(u.jsx)("div",{className:"text-right",children:Object(u.jsx)("button",{children:Object(u.jsx)(p,{})})})}var Qe=function(){var e=Object(L.c)((function(e){return e.imageViewer.urlImage})),t=Object(L.b)();return Object(u.jsx)("div",{className:(""!==e?" block ":" hidden ")+" absolute top-0 left-0 w-full h-full bg-gray-400 bg-opacity-90 z-50 text-center flex items-center justify-center",children:Object(u.jsxs)("div",{className:"relative max-w-90 max-h-90   flex flex-col pt-4",children:[Object(u.jsx)("button",{className:"absolute ring-gray-100 ring-1 -top-0 -right-4  rounded-full bg-gray-800 p-1",onClick:function(){t(ke(""))},children:Object(u.jsx)(_,{})}),Object(u.jsx)("div",{className:"bg-gray-100 text-center p-4 max-h-90  overflow-auto ",children:Object(u.jsx)("img",{className:"inline-block h-full w-auto  max-w-full ",src:e,alt:""})})]})})},Xe=Object(z.b)({name:"user",initialState:{user:null},reducers:{setUser:function(e,t){return null===t.payload?{user:null}:Object(R.a)(Object(R.a)({},e),{},{user:t.payload})}}}),Ke=Xe,Ze=Xe.actions.setUser;function Ge(){var e=Object(L.b)(),t=Object(r.useState)(!1),s=Object(c.a)(t,2),n=s[0],a=s[1],i=Object(r.useState)(""),o=Object(c.a)(i,2),l=o[0],d=o[1],j=function(){var t=Object(T.a)(I.a.mark((function t(s){var r,n,i,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!0),t.next=3,Q.from("users");case 3:r=t.sent,n=r.data,(i=r.error)?(a(!1),d(i.message)):n&&(a(!1),c=n.filter((function(e){return e.id===s}))[0],e(Ze(c)));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(e){return Object(u.jsxs)("button",{className:" hover:bg-main_color_blue hover:text-white transition duration-500 ease-out hover:shadow-lg shadow-md ring-1 ring-facebook_color_blue rounded-md my-2 py-2",onClick:function(){return j(e.id)},children:[e.name,""!==l&&Object(u.jsx)("span",{className:"text-red-600 text-sm block",children:"Error fetching data! "})]})};return Object(u.jsxs)("div",{className:" w-full h-screen overflow-hidden flex items-center relative ",children:[n&&Object(u.jsx)("div",{className:"absolute z-50 w-full h-full bg-gray-200 bg-opacity-60",children:Object(u.jsx)("div",{className:"absolute  top-1/2 left-1/2 ",children:Object(u.jsx)(F,{})})}),Object(u.jsxs)("div",{className:"\n                flex justify-center flex-col text-center\n                rounded-lg \n                shadow-sm \n                border border-gray-100  \n                mx-2 sm:mx-auto mt-16 \n                pb-20 pt-10 px-4  \n                w-full sm:w-2/4 xl:w-1/4   \n            ",children:[Object(u.jsx)("h1",{className:" text-gray-600 text-2xl my-12",children:"Continu As:"}),Object(u.jsx)(f,{name:"Mohamed",id:1}),Object(u.jsx)(f,{name:"El Mehdi",id:2})]})]})}var $e=function(){var e=Object(L.c)((function(e){return e.user.user})),t=Object(r.useState)(!0),s=Object(r.useState)(!0),n=Object(c.a)(s,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){var e=function(){window.innerWidth<768?i(!0):(i(!1),t[1](!1))};e(),window.addEventListener("resize",e)}),[]),Object(r.useEffect)((function(){}),[]),null===e?Object(u.jsx)(Ge,{}):Object(u.jsxs)("div",{className:"w-screen h-screen bg-gray-50 overflow-hidden",children:[Object(u.jsx)(Qe,{}),Object(u.jsxs)("div",{className:" w-full flex  max-w-screen-2xl mx-auto bg-white overflow-hidden h-full ",children:[Object(u.jsx)("div",{className:"w-14 sm:w-1/3 md:w-1/4 overflow-hidden   shadow-lg",children:Object(u.jsx)(de,{})}),Object(u.jsx)(ze,{isRightClosedState:t,isMobileScreenState:[a,i]}),Object(u.jsx)(Je,{isRightClosedState:t,isMobileScreenState:[a,i]})]})]})},et=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,38)).then((function(t){var s=t.getCLS,r=t.getFID,n=t.getFCP,a=t.getLCP,i=t.getTTFB;s(e),r(e),n(e),a(e),i(e)}))},tt=s(8),st=Object(tt.b)({user:Ke.reducer,friends:B.reducer,chat:ee.reducer,imageViewer:Me.reducer,reactionPopup:he.reducer}),rt=Object(z.a)({reducer:st});i.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(L.a,{store:rt,children:Object(u.jsx)($e,{})})}),document.getElementById("root")),et()}},[[35,1,2]]]);
//# sourceMappingURL=main.7c826a93.chunk.js.map